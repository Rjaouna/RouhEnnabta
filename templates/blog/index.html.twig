{% extends 'base.html.twig' %}

{% block title %}Blog
{% endblock %}

{% block body %}
	<section class="container py-5">

		<div class="text-center mb-5">
			<h1 class="fw-bold display-5">
				Notre
				<span class="text-secondary">blog</span>
			</h1>
			<p class="fs-5 text-muted col-lg-7 mx-auto mt-3">
				Actualités, produits du terroir et savoir-faire marocain.
			</p>
			<hr class="border-success border-3 opacity-100 mx-auto mt-4" style="width:80px;">
		</div>

		{% if blogs is empty %}
			<p class="text-center text-muted">
				Aucun article disponible pour le moment.
			</p>
		{% else %}
			<div class="row g-4">
				{% for blog in blogs %}
					<div class="col-md-4">
						<article class="card border-0 shadow-sm h-100 blog-card">

							<div class="position-relative">
								{% if blog.image %}
									<img src="{{ asset('uploads/blogs/' ~ blog.image) }}" class="w-100" alt="{{ blog.name }}" style="height:260px; object-fit:cover;">
								{% endif %}

								<span class="badge bg-success position-absolute top-0 end-0 m-3">
									{{ blog.createdAt|date('d/m/Y') }}
								</span>
							</div>

							<div class="card-body">
								<h4 class="fw-semibold mb-2">
									{{ blog.name }}
								</h4>

								<p class="text-muted">
									{{ blog.content|striptags|slice(0,130) }}…
								</p>

								<a href="{{ path('blog_show', { id: blog.id }) }}" class="text-success fw-semibold text-decoration-none">
									Lire l’article →
								</a>
							</div>

						</article>
					</div>
				{% endfor %}
			</div>
		{% endif %}

	</section>
{% endblock %}

